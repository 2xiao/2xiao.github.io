# [2509. Cycle Length Queries in a Tree](https://leetcode.com/problems/cycle-length-queries-in-a-tree/)

## 题目

You are given an integer `n`. There is a **complete binary tree** with `2n -
1` nodes. The root of that tree is the node with the value `1`, and every node
with a value `val` in the range `[1, 2n - 1 - 1]` has two children where:

- The left node has the value `2 * val`, and
- The right node has the value `2 * val + 1`.

You are also given a 2D integer array `queries` of length `m`, where
`queries[i] = [ai, bi]`. For each query, solve the following problem:

1. Add an edge between the nodes with values `ai` and `bi`.
2. Find the length of the cycle in the graph.
3. Remove the added edge between nodes with values `ai` and `bi`.

**Note** that:

- A **cycle** is a path that starts and ends at the same node, and each edge in the path is visited only once.
- The length of a cycle is the number of edges visited in the cycle.
- There could be multiple edges between two nodes in the tree after adding the edge of the query.

Return _an array_`answer` _of length_`m` _where_ `answer[i]` _is the answer to
the_ `ith` _query._

**Example 1:**

![](https://assets.leetcode.com/uploads/2022/10/25/bexample1.png)

> Input: n = 3, queries = [[5,3],[4,7],[2,3]]
>
> Output: [4,5,3]
>
> Explanation: The diagrams above show the tree of 23 - 1 nodes. Nodes colored in red describe the nodes in the cycle after adding the edge.
>
> - After adding the edge between nodes 3 and 5, the graph contains a cycle of nodes [5,2,1,3]. Thus answer to the first query is 4. We delete the added edge and process the next query.
> - After adding the edge between nodes 4 and 7, the graph contains a cycle of nodes [4,2,1,3,7]. Thus answer to the second query is 5. We delete the added edge and process the next query.
> - After adding the edge between nodes 2 and 3, the graph contains a cycle of nodes [2,1,3]. Thus answer to the third query is 3. We delete the added edge.

**Example 2:**

![](https://assets.leetcode.com/uploads/2022/10/25/aexample2.png)

> Input: n = 2, queries = [[1,2]]
>
> Output: [2]
>
> Explanation: The diagram above shows the tree of 22 - 1 nodes. Nodes colored in red describe the nodes in the cycle after adding the edge.
>
> - After adding the edge between nodes 1 and 2, the graph contains a cycle of nodes [2,1]. Thus answer for the first query is 2. We delete the added edge.

**Constraints:**

- `2 <= n <= 30`
- `m == queries.length`
- `1 <= m <= 10^5`
- `queries[i].length == 2`
- `1 <= ai, bi <= 2n - 1`
- `ai != bi`

## 题目大意

## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`
- **空间复杂度**：`O()`

## 代码

```javascript

```

## 相关题目

:::: md-demo 相关题目

- [116. 填充每个节点的下一个右侧节点指针](./0116.md)
- [236. 二叉树的最近公共祖先](./0236.md)
- [1104. 二叉树寻路](https://leetcode.com/problems/path-in-zigzag-labelled-binary-tree)

::::
